<!DOCTYPE html>
<html>
<head>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-messaging.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAABLBBksiKmh72rBTBEzL0Qh1_RD3NUD8",
      authDomain: "book-my-coolie-82e3c.firebaseapp.com",
      projectId: "book-my-coolie-82e3c",
      storageBucket: "book-my-coolie-82e3c.appspot.com",
      messagingSenderId: "266668166073",
      appId: "1:266668166073:web:84f260b6f4970f48e00468",
      measurementId: "G-305ZHE7MN9"
    };

    firebase.initializeApp(firebaseConfig);

    // Register the service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/firebase-messaging-sw.js')
        .then((registration) => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch((error) => {
          console.error('Service Worker registration failed:', error);
        });
    }

    // Request notification permission
    const messaging = firebase.messaging();
    messaging.requestPermission().then(() => {
      console.log('Notification permission granted.');

      // Get the token
      return messaging.getToken();
    }).then((token) => {
      console.log('FCM Token:', token);
    }).catch((error) => {
      console.error('Unable to get permission to notify.', error);
    });
  </script>
</head>
<body>
  <script src="flutter_bootstrap.js" async></script>
  <script src="main.dart.js" type="application/javascript"></script>
</body>
</html>
